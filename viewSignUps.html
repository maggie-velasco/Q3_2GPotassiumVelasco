<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset = "UTF-8">
    <meta name="viewport" content="width=device-width", initial-scale="1">

    <title>VIEW SIGNUP_VELASCO</title>
    <meta name="author" content="K28">
    <link rel = "stylesheet" href = "Q3_2GPotassiumVelasco.css">
  </head>
  <body>
    <h1>List of Sign-up Students!!</h1>
        <div class="signups">
            <a href="Q3_2GPotassiumVelasco.html"><button>Go Back to Signups</button></a>
            <label>Select a club!: </label>
                <select id="signedClub" onchange="displaytable()" required>
                    <option>ALL</option>
                    <option>Acts</option>
                    <option>Alianti</option>
                    <option>Animo chess club</option>
                    <option>Astrosoc</option>
                    <option>Bake club</option>
                    <option>Computron</option>
                    <option>Exposure</option>
                    <option>Flux</option>
                    <option>Himig-agham</option>
                    <option>Labuyo/Laab</option>
                    <option>Likha</option>
                    <option>Math club</option>
                    <option>Sagala</option>
                    <option>Sigasig</option>
                    <option>Volant</option>
                </select><br/>
            <label>
            <p>Total no. of Signups: <span id="counter">0</span></p>

            <table class="tableSignUps" border="1">
                <thead>
                    <tr>
                        <th>Club</th>
                        <th>ID</th>
                        <th>Full name</th>
                        <th>Age</th>
                        <th>Email</th>
                        <th>Mobile</th>
                    </tr>
                </thead>
                <tbody>

                </tbody>
            </table>

            <p id="message"></p>
        </div>
    <script>
        let savedStuff = JSON.parse(localStorage.getItem("savedStuff")) ||[];
        if(!savedStuff || savedStuff.length === 0){
            document.getElementById("message").textContent = "No sign ups for this club";
        }
        else {
            displaytable(savedStuff);
        }

        function counting(){
            let savedStuff = JSON.parse(localStorage.getItem("savedStuff"));
            
            if(!savedStuff){
                savedStuff = [];
                document.getElementById("counter").textContent = 0;
            }
            else {
                document.getElementById("counter").textContent = savedStuff.length;
            }
        }

        function displaytable(){
            let signedClub = document.getElementById("signedClub").value;
            let table = document.querySelector(".tableSignUps");
            let finding = false;

            while (table.rows.length > 1) {
                table.deleteRow(1);
            }

            for(let i = 0; i < savedStuff.length; i++){
                let user = savedStuff[i];

                if(user.club === signedClub || signedClub==="ALL"){
                    let row = table.insertRow();
                    row.insertCell(0).textContent = user.club;
                    row.insertCell(1).textContent = user.sid;
                    row.insertCell(2).textContent = user.name;
                    row.insertCell(3).textContent = user.bday;
                    row.insertCell(4).textContent = user.ead;
                    row.insertCell(5).textContent = user.mobPhone;
                    finding = true;
                }
            }
            if(!finding){
                let row = table.insertRow();
                let cell = row.insertCell(0);
                cell.colSpan = 6;
                cell.textContent = "No sign-ups for this club!!";
                cell.style.textAlign = "center";
            }
        }

        window.onload = function() {
            counting();
            displaytable();
        }
    </script>
  </body>
</html>
